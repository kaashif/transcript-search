{% extends "layout.html" %}
{% block buttons %}
{% if equals(advanced, "true") %}
<li role="presentation"><a href="/">Search</a></li>
<li role="presentation" class="active"><a href="/advanced">Advanced Search</a></li>
{% else %}
<li role="presentation" class="active"><a href="/">Search</a></li>
<li role="presentation"><a href="/advanced">Advanced Search</a></li>
{% endif %}
<li role="presentation"><a href="/transcripts">Transcripts</a></li>
<li role="presentation"><a href="/about">About</a></li>
{% endblock %}
{% block content %}
{% if equals(toomany, "yes") %}
<div class="alert alert-danger">
  There was a problem with your search query! It was probably
  malformed, please check the syntax and try again.
</div>
{% else %}
{% if results|length == 0 %}
<div class="alert alert-danger">
  <strong>No results found :(</strong>
</div>
{% else %}
<div class="alert alert-success">
  Found <strong>{{ results|length }}</strong> results!
</div>
{% for result in results %}
<div class="panel panel-default">
  <div class="panel-heading">
	<a href="{{ result ['url'] }}">
	  {{ result['episode'] }}, in {{ result['place'] }}
	</a>
  </div>
  <div class="panel-body">
	<ul style="list-style-type: none">
	  {% for c in result['context_before'] %}
	  <li class="text-muted">{{ c }}</li>
	  {% endfor %}
	  <li>{{ result['match'] }}</li>
	  {% for c in result['context_after'] %}
	  <li class="text-muted">{{ c }}</li>
	  {% endfor %}
	</ul>
  </div>
</div>
<hr>
{% endfor %}
{% endif %}
{% endif %}
{% endblock %}
